<div class="container py-5 mx-auto">

  <!-- Êàª„Çã -->
  <div class="mb-4">
    <%= link_to "‚Üê ‰∏ÄË¶ß„Å´Êàª„Çã", posts_path,
          class: "text-decoration-none small text-muted" %>
  </div>

  <!-- „É°„Ç§„É≥„Ç´„Éº„Éâ -->
  <div class="row justify-content-center">
    <div class="col-md-12 col-lg-11">

      <div class="card shadow-sm border-0 rounded-4">

        <div class="card-body p-4 p-md-5">

          <!-- „Çø„Ç§„Éà„É´ -->
          <div class="mb-4">

            <p class="text-muted small mb-2">
              <%= l @post.created_at, format: :long %>
            </p>

            <!-- „Ç´„ÉÜ„Ç¥„É™„Éê„ÉÉ„Ç∏ -->
<span class="badge bg-success-subtle text-success mb-2">
  <%= @post.category&.name || "Êú™ÂàÜÈ°û" %>
</span>


            <h3 class="fw-bold mb-0">
              <%= @post.title %>
            </h3>
          </div>

          <hr>

          <!-- ÈáëÈ°ç -->
          <div class="mb-4">
            <p class="text-muted small mb-1">ÈáëÈ°ç</p>
            <p class="fs-4 fw-semibold mb-0">
              <%= number_to_currency(@post.amount, unit: "¬•") %>
            </p>
          </div>

          <!-- „É°„É¢ -->
          <% if @post.memo.present? %>
            <div class="mb-4">
              <p class="text-muted small mb-1">„É°„É¢</p>
              <div class="p-3 bg-light rounded-3">
                <%= simple_format(@post.memo) %>
              </div>
            </div>
          <% end %>

          <!-- „Éú„Çø„É≥Áæ§ -->
          <div class="d-flex gap-3 mt-5">

            <%= link_to "Á∑®ÈõÜ„Åô„Çã",
                  edit_post_path(@post),
                  class: "btn btn-success flex-fill" %>

            <%= link_to "ÂâäÈô§„Åô„Çã",
                  post_path(@post),
                  method: :delete,
                  data: { confirm: "ÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü" },
                  class: "btn btn-outline-secondary flex-fill" %>

          </div>

        </div>
      </div>
<!-- ===================== -->
<!-- üí¨ „Ç≥„É°„É≥„Éà„Ç®„É™„Ç¢ËøΩÂä† -->
<!-- ===================== -->

<div class="row justify-content-center mt-5">
  <div class="col-md-12 col-lg-11">

    <div class="card shadow-sm border-0 rounded-4">
      <div class="card-body p-4">

        <h5 class="fw-bold mb-3">üí¨ „Ç≥„É°„É≥„Éà</h5>

        <!-- „Ç≥„É°„É≥„Éà‰∏ÄË¶ß -->
        <% @post.comments.order(created_at: :desc).each do |comment| %>
          <div class="bg-light rounded-3 p-3 mb-2 small">

            <div class="text-muted mb-1">
              <strong><%= comment.user.name %></strong>
              „Éª <%= l comment.created_at, format: :short %>
            </div>

            <div>
              <%= simple_format(comment.body) %>
            </div>

          </div>
        <% end %>


        <!-- „Éï„Ç©„Éº„É† -->
        <% if user_signed_in? %>
          <div class="mt-3">
            <%= form_with model: [@post, Comment.new], local: true do |f| %>

              <%= f.text_area :body,
                    rows: 2,
                    placeholder: "„Å≤„Å®„Åì„Å®„Ç≥„É°„É≥„Éà...",
                    class: "form-control mb-2 rounded-3" %>

              <%= f.submit "ÈÄÅ‰ø°",
                    class: "btn btn-success btn-sm px-4" %>

            <% end %>
          </div>
        <% end %>

      </div>
    </div>

  </div>
</div>

    </div>
  </div>
</div>
